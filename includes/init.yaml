- name: set the role version
  set_fact:
    ansible_network_frr_path: "{{ role_path }}"
    ansible_network_frr_version: "devel"

- name: display the role version to stdout
  debug:
    msg: "ansible_network.frr version {{ ansible_network_frr_version }}"

- name: validate ansible_network_os == 'frr'
  fail:
    msg: "expected ansible_network_os to be `frr`, got `{{ ansible_network_os }}`"
  when: ansible_network_os is defined and ansible_network_os != 'frr'

- name: validate ansible_connection == 'network_cli' or ansible_connection == 'ssh'
  fail:
    msg: "expected ansible_connection to be `network_cli`, got `{{ ansible_connection }}`"
  when: ansible_connection != 'ssh' and ansible_connection != 'network_cli'

- name: Validate we have required installed version of dependent roles from meta
  verify_dependent_role_version:
    role_path: "{{ role_path }}"
  when: frr_dependent_role_check|bool
